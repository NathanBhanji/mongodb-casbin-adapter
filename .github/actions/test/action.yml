name: ðŸ§ª Run Tests and Upload Coverage
description: 'Runs tests with coverage and uploads results to Codecov'

inputs:
  codecov-token:
    description: 'Codecov token for uploading coverage results'
    required: true

runs:
  using: 'composite'
  steps:
    - name: ðŸ”§ Setup Environment
      uses: ./.github/actions/setup

    - name: ðŸ§ª Run tests with coverage
      shell: bash
      run: yarn test --coverage

    - name: ðŸ“Š Upload coverage to Codecov
      uses: codecov/codecov-action@v4
      with:
        token: ${{ inputs.codecov-token }}
