name: 🧪 Tests
description: 'Runs tests with coverage and uploads results to Codecov'

inputs:
  codecov-token:
    description: 'Codecov token for uploading coverage results'
    required: true

runs:
  using: 'composite'
  steps:
    - name: 🧑‍🔬 Run tests
      shell: bash
      run: yarn test --coverage

    - name: 📊 Upload coverage to Codecov
      uses: codecov/codecov-action@v4
      with:
        token: ${{ inputs.codecov-token }}
